{"ast":null,"code":"import { authSlice } from \"./AuthSlice\";\nimport { login, registration } from \"../../../http/userAPI\";\nexport const AuthActionCreator = {\n  setIsAuth: isAuth => dispatch => {\n    dispatch(authSlice.actions.setIsAuth(isAuth));\n  },\n  setUser: user => dispatch => {\n    dispatch(authSlice.actions.setUser(user));\n  },\n  singIn: (email, password) => dispatch => {\n    try {\n      registration(email, password).then(data => {\n        dispatch(authSlice.actions.setIsError(false));\n      });\n    } catch (e) {\n      console.log(e.response.data.message);\n      dispatch(authSlice.actions.setIsError(true));\n    }\n  },\n  logIn: (email, password) => dispatch => {\n    try {\n      login(email, password).then(data => {\n        dispatch(authSlice.actions.setIsError(false));\n        dispatch(AuthActionCreator.setIsAuth(true));\n        dispatch(AuthActionCreator.setUser(data));\n        localStorage.setItem('auth', JSON.stringify(true));\n        localStorage.setItem('user', JSON.stringify(data));\n      });\n    } catch (e) {\n      console.log(e.response.data.message);\n      dispatch(authSlice.actions.setIsError(true));\n      if (e.response.status(404)) {\n        dispatch(authSlice.actions.setLogMessage('Користувача з таким логіном не існує'));\n        return;\n      }\n      if (e.response.status(401)) {\n        dispatch(authSlice.actions.setLogMessage('Ви ввели неправильний пароль'));\n        return;\n      }\n      dispatch(authSlice.actions.setLogMessage('Невідома помилка'));\n    }\n  },\n  logOut: () => async dispatch => {\n    try {\n      dispatch(AuthActionCreator.setUser({}));\n      dispatch(AuthActionCreator.setIsAuth(false));\n      localStorage.removeItem('auth');\n      localStorage.removeItem('user');\n      localStorage.removeItem('token');\n    } catch (e) {\n      alert(e.response.data.message);\n    }\n  }\n};","map":{"version":3,"names":["authSlice","login","registration","AuthActionCreator","setIsAuth","isAuth","dispatch","actions","setUser","user","singIn","email","password","then","data","setIsError","e","console","log","response","message","logIn","localStorage","setItem","JSON","stringify","status","setLogMessage","logOut","removeItem","alert"],"sources":["/Users/alexander/Desktop/myStudy/client/src/store/reducers/auth/action-creator.js"],"sourcesContent":["import {authSlice} from \"./AuthSlice\";\nimport {login, registration} from \"../../../http/userAPI\";\n\nexport const AuthActionCreator = {\n    setIsAuth: (isAuth) => dispatch => {\n        dispatch(authSlice.actions.setIsAuth(isAuth))\n    },\n    setUser: (user) => dispatch => {\n        dispatch(authSlice.actions.setUser(user))\n    },\n    singIn: (email, password) => dispatch => {\n        try {\n            registration(email, password).then(data => {\n                dispatch(authSlice.actions.setIsError(false))\n            })\n        } catch (e) {\n            console.log(e.response.data.message)\n            dispatch(authSlice.actions.setIsError(true))\n        }\n    },\n    logIn: (email, password) => dispatch => {\n        try {\n            login(email, password).then(data => {\n                dispatch(authSlice.actions.setIsError(false))\n                dispatch(AuthActionCreator.setIsAuth(true))\n                dispatch(AuthActionCreator.setUser(data))\n                localStorage.setItem('auth', JSON.stringify(true))\n                localStorage.setItem('user', JSON.stringify(data))\n            })\n        } catch (e) {\n            console.log(e.response.data.message)\n            dispatch(authSlice.actions.setIsError(true))\n            if(e.response.status(404)) {\n                dispatch(authSlice.actions.setLogMessage('Користувача з таким логіном не існує'))\n                return\n            }\n            if(e.response.status(401)) {\n                dispatch(authSlice.actions.setLogMessage('Ви ввели неправильний пароль'))\n                return\n            }\n            dispatch(authSlice.actions.setLogMessage('Невідома помилка'))\n        }\n    },\n    logOut: () => async dispatch => {\n        try {\n            dispatch(AuthActionCreator.setUser({}))\n            dispatch(AuthActionCreator.setIsAuth(false))\n            localStorage.removeItem('auth')\n            localStorage.removeItem('user')\n            localStorage.removeItem('token')\n        }catch (e) {\n            alert(e.response.data.message)\n        }\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}